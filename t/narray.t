#!perl -T
use Test2::V0;

use Jo::Util qw(narray);

is narray(sub {$_[0]}, 3), [qw(0 1 2)], '1-d array';

is narray(sub {$_[0] == $_[1] || 0}, 3, 3),
	[[1, 0, 0], [0, 1, 0], [0, 0, 1]], '3x3 identity';

is narray(sub {local $" = '-'; "@_"}, 3, 3, 3),
	[[[qw(0-0-0 0-0-1 0-0-2)],
		[qw(0-1-0 0-1-1 0-1-2)],
		[qw(0-2-0 0-2-1 0-2-2)]],
	[[qw(1-0-0 1-0-1 1-0-2)],
		[qw(1-1-0 1-1-1 1-1-2)],
		[qw(1-2-0 1-2-1 1-2-2)]],
	[[qw(2-0-0 2-0-1 2-0-2)],
		[qw(2-1-0 2-1-1 2-1-2)],
		[qw(2-2-0 2-2-1 2-2-2)]]], '3-d array';

my $ar = narray {$_ * $_} 10;
is $ar, [0, 1, 4, 9, 16, 25, 36, 49, 64, 81], 'built-in call style';

done_testing;
